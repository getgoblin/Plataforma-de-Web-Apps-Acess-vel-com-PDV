<article class="ri__wrap">
  <div class="ri__main">
    <div class="ri__name">{{ item.nome }}</div>
    <div class="ri__code">{{ item.codigo }}</div>
  </div>
  <div class="ri__qty">
    <label>Qtd</label>
    <input type="number" min="1" [value]="item.qtd" (change)="onQtyChange($event)"/>
  </div>
  <div class="ri__disc">
    <label>Desconto</label>
    <div class="ri__disc-row">
      <select [value]="tipoDesc()" (change)="onTipoDescChange($event)">
        <option value="percentual">%</option>
        <option value="valor">R$ Valor</option>
      </select>
    <input
      type="number"
      min="0"
      [attr.max]="tipoDesc() === 'percentual' ? 100 : null"
      [value]="tipoDesc() === 'percentual'
        ? item.descontoPctUnit
        : (item.precoUnit * item.qtd * (item.descontoPctUnit/100))"
      (change)="onDescChange($event)"
    />
    </div>
    <small class="ri__hint">
      <ng-container *ngIf="tipoDesc() === 'percentual'; else valorHint">0-100% por item.</ng-container>
      <ng-template #valorHint>Valor em R$ para este item.</ng-template>
    </small>
  </div>
  <div class="ri__price">
    <div class="ri__unit">R$ {{ item.precoUnit | number:'1.2-2' }}</div>
    <div class="ri__total">R$ {{ (item.precoUnit * item.qtd * (1 - item.descontoPctUnit/100)) | number:'1.2-2' }}</div>
  </div>
  <div class="ri__actions">
    <button class="ri__btn" (click)="remove()" title="Remover">x</button>
  </div>
</article>
