<div class="topbar" role="none">
  <!-- slots de tabs (fundo) -->
  <app-tab-slots [count]="6"
                 [occupied]="occupiedCount()"
                 [focusedIndex]="focusedIndex()"></app-tab-slots>

  <!-- abas/bolinhas (por cima dos slots) -->
  <nav class="topbar__windows" aria-label="Janelas abertas">
    <app-window-manager></app-window-manager>
  </nav>

  <!-- botão Widgets centralizado -->
  <div class="topbar__widgets" role="group" aria-label="Abrir lista de aplicativos">
    <app-widgets-button></app-widgets-button>
  </div>

  <!-- menu do usuário (direita) -->
  <nav class="topbar__user" aria-label="Menu do usuário" #userMenuWrap>
    <button type="button"
            class="user-btn"
            aria-haspopup="menu"
            [attr.aria-expanded]="menuOpen() ? 'true' : 'false'"
            aria-controls="user-menu"
            (click)="toggleUserMenu()">
      {{ userName() || '—' }}
    </button>

    <ul id="user-menu" class="topbar__dropdown" role="menu" [hidden]="!menuOpen()">
      <li role="none"><button role="menuitem" type="button" (click)="openHelp()">Help</button></li>
      <li role="none"><button role="menuitem" type="button" (click)="onLogoff()">Logoff</button></li>
    </ul>
  </nav>
</div>
