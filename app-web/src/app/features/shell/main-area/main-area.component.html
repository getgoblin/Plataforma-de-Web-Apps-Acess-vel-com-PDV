<!-- === workspace === -->
<section class="workspace" aria-label="Área principal de trabalho">
  <!-- --- ambient background --- -->
  <div class="ambient-bg" #ambient aria-hidden="true"></div>

  <!-- === content slot (recebe a janela focada) === -->
  <div class="content-slot">
    <ng-container *ngIf="focused() as w; else empty">
      <app-window-frame
        [windowId]="w.id"
        [title]="meta()?.name || ''"
        [state]="w.state || 'normal'">

        <!-- --- widget lazy (com loading local) --- -->
        <ng-container *ngIf="cmp(); else loading">
          <ng-container [ngComponentOutlet]="cmp()"></ng-container>
        </ng-container>

        <ng-template #loading>
          <div class="empty-state">Carregando widget…</div>
        </ng-template>
      </app-window-frame>
    </ng-container>

    <!-- --- vazio (sem mensagem) --- -->
    <ng-template #empty>
      <div class="empty-state"></div>
    </ng-template>
  </div>
</section>
