<!-- === workspace === -->
<section class="workspace" aria-label="Área principal de trabalho">
  <!-- --- ambient background --- -->
  <div class="ambient-bg" #ambient aria-hidden="true"></div>

  <!-- === content slot (todas as janelas não minimizadas) === -->
  <div class="content-slot">
    <ng-container *ngFor="let w of visible(); trackBy: trackById">
      <app-window-frame
        [windowId]="w.id"
        [title]="(metaFor(w.appId)?.name || w.title)"
        [state]="w.state || 'normal'"
        [zIndex]="zFor(w.id)">

        <ng-container *ngIf="cmpFor(w.appId) as Cmp; else loading">
          <ng-container [ngComponentOutlet]="Cmp"></ng-container>
        </ng-container>
        <ng-template #loading>
          <div class="empty-state">Carregando widget…</div>
        </ng-template>
      </app-window-frame>
    </ng-container>
  </div>
</section>
